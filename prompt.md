これから、このプロジェクト(bitbank用Bot作成支援ライブラリ)のBotサポートを大幅に拡充したいです。

現在は、 `src/bitbank_bot.rs` と、 `bitbank_multiple_bot.rs` に実装されています。

今の実装は、BotTraitのメソッドが、&selfとstateを受け取りつつstateを返すような設計となっています。
ActorモデルでいうActorとHandlerの分離ができていないために、複数ペアの情報を受け取るようなBotを組むためには `src/bitbank_bot.rs`を使うことはできず(Stateの共有が難しくなるので)、そのため `bitbank_multiple_bot.rs`のように、アドホックな実装を必要としています。

これは非常に問題だと考えています。 このような問題をどう解決できるか試すために、自分でややアドホックな実装をした時のプログラムが `ref_lib.md` にあります。
これらの情報を参考にしつつ、`src/bitbank_botrs`や `bitbank_multiple_bot.rs` の設計変更を行なってください。

要件としては、

- 幅広い情報源を扱うBotの設計ができる(例えば、複数ペアの情報を見たり、ユーザーが独自に参照する情報源が使える)
- ユーザーが、できるだけコアロジックに集中できるようなインターフェイスになっている(例えば、ユーザーはボイラープレートをなん度も書くのは好きではないはずです)
- Mutexなどを使うのではなく、メッセージパッシングを使う
- できればインターネットからリアルタイムでWebSocket通信する以外にも、WebSocket通信のログのテキストデータから擬似的な通信ができる(=バックテストやフォワードテストができる)とすごい嬉しいですが、必須ではありません