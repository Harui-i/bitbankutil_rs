## 取り組んだ実装
- 既存の注文管理ロジックを汎用化するため、`BitbankTradingApi` トレイトを追加し、実 REST クライアントが実装するよう拡張。これにより実運用とシミュレーションの両方で同一の API 呼び出しを再利用可能にした。
- JSON Lines 形式の板・約定ログを再生するバックテスト基盤を `src/backtest/` に新設。レート制限や遅延を模擬しながら `BitbankEvent` を生成し、戦略へ流し込む仕組みを構築。結果として取引数・約定数・損益・最大ドローダウン等をレポートできるようにした。
- マーケットメイク戦略 (`best_mm`) を `src/strategies/` に切り出し、実運用例とバックテスト例の両方から同じロジックを利用できるよう再構成。新しい `best_mm_backtest` 例では JSONL リプレイ＋シミュレータ API を使用する。
- 新規機能に必要な依存 (`async-trait`, `thiserror`) を追加し、各モジュールの多重 clone / 非同期処理を整理した。

## 直面した課題と対処
- **注文 API の抽象化**: 既存コードは `BitbankPrivateApiClient` 固定だったため、バックテスト用クライアントと差し替えができなかった。`BitbankTradingApi` トレイトを定義し、`order_manager` 等をジェネリックに書き換えることで解決。
- **JSONL データのマッピング**: ログで部屋名（`room_name`）ごとにキーが異なるため、動的にキーを解決して `BitbankInboundMessage` に変換。未知チャネルではエラーを返すよう防御的に実装した。
- **レート制限・遅延の模擬**: 実運用との乖離を減らすため、API カテゴリごとに最小インターバルと往復遅延を設定。バックテスト高速化のため `speed_multiplier` で時間スケールを調整できるようにした。
- **テスト失敗 (DNS)**: 既存の `cargo test` がオンライン API を叩く仕様のため、Sandbox では DNS 解決に失敗。実装自体は `cargo check` で検証し、問題箇所と原因をレポート。

## 今後の課題
- **バックテスト結果の検証**: 代替の真実データや実運用ログとの比較を通じて、約定判定（特に部分約定やスリッページ）を精緻化する必要がある。
- **取引所制約の追加**: 価格／数量ステップ、手数料体系（ペア・口座種別ごと）、触媒イベント（メンテナンス等）を設定ファイル化すると柔軟性が向上する。
- **テスト環境の整備**: オフライン用のモックや Fixture を追加し、ネットワーク不要で `cargo test` が通る形に改修したい。現状は外部 API の疎通に依存したテストが残っている。 ***
- **ログの制約**: ログ出力が律速しているため、ログ出力を抑えて高速化することを試す必要がある。
